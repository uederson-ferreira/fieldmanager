# Diagramas de Arquitetura Multi-DomÃ­nio - EcoField

## 1. Arquitetura Atual vs Proposta

### Arquitetura Atual (Mono-DomÃ­nio)

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ECOFIELD ATUAL                       â”‚
â”‚                 (Meio Ambiente Only)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LV-01       â”‚  â”‚  LV-02       â”‚  â”‚  LV-29       â”‚ â”‚
â”‚  â”‚  ResÃ­duos    â”‚  â”‚  Efluentes   â”‚  â”‚  ...         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                 â”‚                 â”‚          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                           â”‚                            â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚  categorias_lv         â”‚                â”‚
â”‚              â”‚  perguntas_lv          â”‚                â”‚
â”‚              â”‚  (Hard-coded)          â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                           â”‚                            â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚  lvs (tabela Ãºnica)    â”‚                â”‚
â”‚              â”‚  lv_avaliacoes         â”‚                â”‚
â”‚              â”‚  lv_fotos              â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                         â”‚
â”‚  LimitaÃ§Ã£o: Apenas Meio Ambiente                       â”‚
â”‚  Escalabilidade: Baixa (cÃ³digo duplicado por domÃ­nio)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arquitetura Proposta (Multi-DomÃ­nio)

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PLATAFORMA ECOFIELD                              â”‚
â”‚                    (Multi-Tenant + Multi-DomÃ­nio)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Meio      â”‚  â”‚ SeguranÃ§a  â”‚  â”‚ Qualidade  â”‚  â”‚   SaÃºde    â”‚ ...  â”‚
â”‚  â”‚  Ambiente  â”‚  â”‚  Trabalho  â”‚  â”‚   ISO      â”‚  â”‚   PCMSO    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚        â”‚               â”‚               â”‚               â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ LV ResÃ­duosâ”‚  â”‚  NR-35     â”‚  â”‚ ISO 9001   â”‚  â”‚ Controle   â”‚      â”‚
â”‚  â”‚ LV Fauna   â”‚  â”‚  NR-10     â”‚  â”‚ 5S         â”‚  â”‚ ASO        â”‚      â”‚
â”‚  â”‚ LV ...     â”‚  â”‚  NR-33     â”‚  â”‚ Auditoria  â”‚  â”‚ Exames     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚        â”‚               â”‚               â”‚               â”‚              â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                        â”‚                                              â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚           â”‚   CAMADA DE ABSTRAÃ‡ÃƒO     â”‚                               â”‚
â”‚           â”‚                           â”‚                               â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                               â”‚
â”‚           â”‚  â”‚ dominios            â”‚  â”‚ (Tabelas GenÃ©ricas)           â”‚
â”‚           â”‚  â”‚ modulos_sistema     â”‚  â”‚                               â”‚
â”‚           â”‚  â”‚ perguntas_modulos   â”‚  â”‚                               â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                               â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                       â”‚                                               â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚           â”‚   CAMADA DE DADOS         â”‚                               â”‚
â”‚           â”‚                           â”‚                               â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                               â”‚
â”‚           â”‚  â”‚ execucoes           â”‚  â”‚ (Dados Unificados)            â”‚
â”‚           â”‚  â”‚ execucoes_respostas â”‚  â”‚                               â”‚
â”‚           â”‚  â”‚ execucoes_fotos     â”‚  â”‚                               â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                               â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                       â”‚                                               â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚           â”‚   MULTI-TENANCY           â”‚                               â”‚
â”‚           â”‚                           â”‚                               â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                               â”‚
â”‚           â”‚  â”‚ tenants             â”‚  â”‚                               â”‚
â”‚           â”‚  â”‚ tenant_dominios     â”‚  â”‚                               â”‚
â”‚           â”‚  â”‚ usuarios            â”‚  â”‚                               â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                               â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                                         â”‚
â”‚  Vantagens:                                                            â”‚
â”‚  âœ… EscalÃ¡vel (adicionar novos domÃ­nios sem cÃ³digo)                    â”‚
â”‚  âœ… ReutilizaÃ§Ã£o (80%+ do cÃ³digo compartilhado)                        â”‚
â”‚  âœ… FlexÃ­vel (templates + customizaÃ§Ã£o)                                â”‚
â”‚  âœ… Multi-tenant (isolamento de dados por empresa)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Modelo de Dados Detalhado

### Relacionamentos Entre Entidades

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    tenants      â”‚ (Empresas Clientes)
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ nome_empresa    â”‚           â”‚
â”‚ plano           â”‚           â”‚  1:N
â”‚ ativo           â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ tenant_dominios  â”‚ (MÃ³dulos Ativos)
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ id               â”‚
                    â”‚ tenant_id        â”‚â”€â”€â”€â”€â”€â”
                    â”‚ dominio_id       â”‚â—„â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
                    â”‚ ativo            â”‚     â”‚     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚
                              â”‚              â”‚     â”‚
                              â”‚ N:1          â”‚     â”‚
                              â”‚              â”‚     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚              â”‚     â”‚
â”‚    dominios     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚     â”‚
â”‚ id              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚ codigo          â”‚ 'ambiental', 'seguranca'       â”‚
â”‚ nome            â”‚                                â”‚
â”‚ icone           â”‚                          1:N   â”‚
â”‚ cor_primaria    â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
        â”‚ 1:N                                      â”‚
        â”‚                                          â”‚
        â–¼                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚modulos_sistema  â”‚ (Checklists, FormulÃ¡rios)      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                â”‚
â”‚ id              â”‚                                â”‚
â”‚ dominio_id      â”‚                                â”‚
â”‚ tenant_id       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ codigo          â”‚ 'lv-residuos', 'nr35'
â”‚ nome            â”‚
â”‚ tipo_modulo     â”‚ 'checklist', 'formulario'
â”‚ configuracao    â”‚ (JSON)
â”‚ template        â”‚ (boolean)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1:N
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚perguntas_modulosâ”‚ (Itens de VerificaÃ§Ã£o)
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id              â”‚
â”‚ modulo_id       â”‚
â”‚ codigo          â”‚ '01.001', 'NR35.001'
â”‚ pergunta        â”‚
â”‚ tipo_resposta   â”‚ 'boolean', 'text', 'multiple'
â”‚ opcoes_resposta â”‚ (JSON)
â”‚ categoria       â”‚
â”‚ ordem           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Fluxo de Dados - Exemplo PrÃ¡tico

### CenÃ¡rio: UsuÃ¡rio cria checklist NR-35

```bash
1. SELEÃ‡ÃƒO DE DOMÃNIO
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ DominioSelector      â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ [ ] Meio Ambiente    â”‚
   â”‚ [x] SeguranÃ§a        â”‚  â—„â”€â”€ UsuÃ¡rio seleciona
   â”‚ [ ] Qualidade        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   localStorage.setItem('dominio_atual', 'seguranca-id')
   Context atualiza: dominioAtual = 'SeguranÃ§a'
            â”‚
            â–¼
2. CARREGAMENTO DE MÃ“DULOS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GET /api/dominios/   â”‚
   â”‚   {dominioId}/       â”‚
   â”‚   modulos            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   Query: modulos_sistema WHERE dominio_id = 'seguranca-id'
          AND (template = true OR tenant_id = 'meu-tenant')
            â”‚
            â–¼
   Resultado:
   [
     { id: 'mod1', codigo: 'nr35', nome: 'NR-35 Trabalho Altura' },
     { id: 'mod2', codigo: 'nr10', nome: 'NR-10 Eletricidade' },
     { id: 'mod3', codigo: 'nr33', nome: 'NR-33 EspaÃ§o Confinado' }
   ]
            â”‚
            â–¼
3. NAVEGAÃ‡ÃƒO DINÃ‚MICA ATUALIZA
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Menu Lateral         â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ > Dashboard          â”‚
   â”‚ > Metas              â”‚
   â”‚ â”€â”€ SEGURANÃ‡A â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â—„â”€â”€ SeÃ§Ã£o dinÃ¢mica
   â”‚ > NR-35              â”‚
   â”‚ > NR-10              â”‚
   â”‚ > NR-33              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
4. USUÃRIO CLICA EM "NR-35"
   setActiveSection('modulo-mod1')
            â”‚
            â–¼
5. CARREGAMENTO DE PERGUNTAS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GET /api/dominios/   â”‚
   â”‚   modulos/{mod1}/    â”‚
   â”‚   perguntas          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   Query: perguntas_modulos WHERE modulo_id = 'mod1' AND ativo = true
          ORDER BY ordem
            â”‚
            â–¼
   Resultado:
   [
     { id: 'p1', codigo: 'NR35.001', pergunta: 'Cinto paraquedista?', tipo: 'boolean' },
     { id: 'p2', codigo: 'NR35.002', pergunta: 'Treinamento vÃ¡lido?', tipo: 'boolean' },
     ...
   ]
            â”‚
            â–¼
6. RENDERIZAÃ‡ÃƒO DO FORMULÃRIO (Componente GenÃ©rico)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ModuloFormulario                     â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ TÃ­tulo: NR-35 Trabalho em Altura     â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ 1. Cinto paraquedista? [C][NC][NA]   â”‚
   â”‚    ğŸ“· Foto  ğŸ“ ObservaÃ§Ã£o            â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ 2. Treinamento vÃ¡lido? [C][NC][NA]   â”‚
   â”‚    ğŸ“· Foto  ğŸ“ ObservaÃ§Ã£o            â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ ...                                  â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ [Salvar] [Cancelar]                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
7. USUÃRIO PREENCHE E SALVA
   POST /api/execucoes
   {
     tenant_id: 'tenant-xyz',
     modulo_id: 'mod1',
     usuario_id: 'user-abc',
     respostas: [
       { pergunta_id: 'p1', resposta: 'C', observacao: 'OK' },
       { pergunta_id: 'p2', resposta: 'NC', observacao: 'Vencido' }
     ],
     fotos: [...]
   }
            â”‚
            â–¼
8. BACKEND SALVA EM TABELAS GENÃ‰RICAS
   INSERT INTO execucoes (tenant_id, modulo_id, usuario_id, ...)
   INSERT INTO execucoes_respostas (execucao_id, pergunta_id, resposta, ...)
   INSERT INTO execucoes_fotos (execucao_id, pergunta_id, url, ...)
            â”‚
            â–¼
9. RESPOSTA SUCESSO
   { execucao_id: 'exec-001', sucesso: true }
            â”‚
            â–¼
10. FRONTEND ATUALIZA DASHBOARD
    Stats atualizados:
    - Checklists NR-35: +1
    - NÃ£o conformidades: +1 (pergunta p2)
    - AÃ§Ã£o corretiva criada automaticamente
```

---

## 4. Componente LV GenÃ©rico - Antes e Depois

### ANTES (CÃ³digo EspecÃ­fico para Meio Ambiente)

```typescript
// src/components/lv/LVContainer.tsx (ATUAL)
const LVContainer: React.FC<LVContainerProps> = ({ user, tipo_lv, onBack }) => {
  // tipo_lv hard-coded: 'residuos', 'fauna', 'efluentes'

  const configuracao = {
    codigo: 'LV-01',
    nome: 'ResÃ­duos SÃ³lidos',
    nomeCompleto: 'Lista de VerificaÃ§Ã£o - ResÃ­duos SÃ³lidos',
    numero_lv: 'LV-01',
    titulo_lv: 'INSPEÃ‡ÃƒO AMBIENTAL - RESÃDUOS',
    revisao: '01',
    dataRevisao: '2025-01-01',
    itens: [ /* perguntas hard-coded */ ]
  };

  // Componente rÃ­gido, nÃ£o flexÃ­vel
  return (
    <div>
      <h1>{configuracao.titulo_lv}</h1>
      <LVForm itens={configuracao.itens} />
    </div>
  );
};
```

### DEPOIS (Componente GenÃ©rico Multi-DomÃ­nio)

```typescript
// src/components/modulos/ModuloContainer.tsx (NOVO)
interface ModuloContainerProps {
  user: UserData;
  moduloId: string;
  onBack: () => void;
}

const ModuloContainer: React.FC<ModuloContainerProps> = ({ user, moduloId, onBack }) => {
  const { dominioAtual } = useDominio();
  const [modulo, setModulo] = useState<ModuloSistema | null>(null);
  const [perguntas, setPerguntas] = useState<PerguntaModulo[]>([]);

  useEffect(() => {
    // Carrega mÃ³dulo dinamicamente
    dominiosAPI.getModulo(moduloId).then(setModulo);
    dominiosAPI.getPerguntasModulo(moduloId).then(setPerguntas);
  }, [moduloId]);

  if (!modulo) return <LoadingSpinner />;

  // RenderizaÃ§Ã£o genÃ©rica baseada em tipo_modulo
  const FormularioComponente = {
    'checklist': ChecklistForm,
    'formulario': FormularioPadrao,
    'inspecao': InspecaoForm,
    'auditoria': AuditoriaForm
  }[modulo.tipo_modulo];

  return (
    <div>
      {/* Header com cor do domÃ­nio */}
      <header style={{ backgroundColor: dominioAtual.corPrimaria }}>
        <h1>{modulo.nome}</h1>
      </header>

      {/* FormulÃ¡rio genÃ©rico */}
      <FormularioComponente
        modulo={modulo}
        perguntas={perguntas}
        onSalvar={(dados) => salvarExecucao(moduloId, dados)}
      />
    </div>
  );
};
```

---

## 5. Fluxo de CustomizaÃ§Ã£o por Tenant

```bash
EMPRESA A (IndÃºstria)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tenant: Empresa A            â”‚
â”‚ Plano: Professional          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DomÃ­nios Ativos:             â”‚
â”‚ âœ… Meio Ambiente             â”‚
â”‚ âœ… SeguranÃ§a                 â”‚
â”‚ âœ… Qualidade                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
MÃ³dulos DisponÃ­veis:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Templates PadrÃ£o (Sistema)              â”‚
â”‚ âœ… LV-01 ResÃ­duos (template: true)      â”‚
â”‚ âœ… NR-35 (template: true)               â”‚
â”‚ âœ… ISO 9001 (template: true)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        +
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ³dulos Customizados (Empresa A)        â”‚
â”‚ âœ… InspeÃ§Ã£o Caldeiras (tenant_id: A)    â”‚
â”‚ âœ… Checklist Empilhadeiras (tenant_id: A)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
Total: 5 mÃ³dulos disponÃ­veis


EMPRESA B (ConstruÃ§Ã£o Civil)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tenant: Empresa B            â”‚
â”‚ Plano: Enterprise            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DomÃ­nios Ativos:             â”‚
â”‚ âœ… SeguranÃ§a                 â”‚
â”‚ âœ… Qualidade                 â”‚
â”‚ âŒ Meio Ambiente (inativo)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
MÃ³dulos DisponÃ­veis:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Templates PadrÃ£o (Sistema)              â”‚
â”‚ âœ… NR-35 (template: true)               â”‚
â”‚ âœ… NR-18 ConstruÃ§Ã£o (template: true)    â”‚
â”‚ âœ… 5S Obra (template: true)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        +
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ³dulos Customizados (Empresa B)        â”‚
â”‚ âœ… DDS DiÃ¡rio (tenant_id: B)            â”‚
â”‚ âœ… VerificaÃ§Ã£o Andaimes (tenant_id: B)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
Total: 5 mÃ³dulos disponÃ­veis

ğŸ”’ ISOLAMENTO TOTAL: Empresa A nÃ£o vÃª mÃ³dulos da Empresa B
```

---

## 6. Diagrama de Deploy Multi-Tenant

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND (Vercel)                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ app.eco     â”‚  â”‚ empresaA    â”‚  â”‚ empresaB    â”‚            â”‚
â”‚  â”‚ field.com   â”‚  â”‚ .ecofield   â”‚  â”‚ .ecofield   â”‚            â”‚
â”‚  â”‚ (Landing)   â”‚  â”‚ .com        â”‚  â”‚ .com        â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                â”‚                â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                          â”‚                                      â”‚
â”‚                 Detecta tenant por:                             â”‚
â”‚                 1. SubdomÃ­nio (empresaA.ecofield.com)           â”‚
â”‚                 2. Query param (?tenant=A)                      â”‚
â”‚                 3. localStorage (tenant_id)                     â”‚
â”‚                          â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Express API)                        â”‚
â”‚                                                                 â”‚
â”‚  Middleware: TenantResolver                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ 1. Extract tenant from request                              â”‚
â”‚  â”‚ 2. Verify tenant active & valid plan                        â”‚
â”‚  â”‚ 3. Set tenant_id in request context                         â”‚
â”‚  â”‚ 4. Apply RLS policies                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUPABASE (Database)                          â”‚
â”‚                                                                 â”‚
â”‚  Row Level Security (RLS) Policies:                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ CREATE POLICY "Tenant Isolation"                            â”‚
â”‚  â”‚ ON execucoes FOR ALL                                        â”‚
â”‚  â”‚ USING (tenant_id = current_setting('app.tenant_id')::uuid)  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Dados Isolados por Tenant:                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Tenant A     â”‚ â”‚ Tenant B     â”‚ â”‚ Tenant C     â”‚           â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚  â”‚ 1000 exec    â”‚ â”‚ 500 exec     â”‚ â”‚ 2000 exec    â”‚           â”‚
â”‚  â”‚ 5000 fotos   â”‚ â”‚ 2000 fotos   â”‚ â”‚ 8000 fotos   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                 â”‚
â”‚  Templates Compartilhados (tenant_id = NULL):                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ â€¢ DomÃ­nios (6 padrÃ£o)                                       â”‚
â”‚  â”‚ â€¢ MÃ³dulos Template (50+ checklists)                         â”‚
â”‚  â”‚ â€¢ Perguntas PadrÃ£o (1000+ itens)                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Exemplo de Tela - Seletor Multi-DomÃ­nio

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EcoField - GestÃ£o Integrada                    [ğŸ‘¤ JoÃ£o Silva]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ğŸ“Š Selecione o DomÃ­nio de Trabalho:                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚  ğŸŒ±    â”‚   â”‚  ğŸ¦º    â”‚  â”‚  â­    â”‚  â”‚  ğŸ’‰    â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  Meio  â”‚  â”‚Segur.  â”‚  â”‚Qualid. â”‚  â”‚ SaÃºde  â”‚        â”‚ â”‚
â”‚  â”‚  â”‚ Ambien.â”‚  â”‚Trabalhoâ”‚  â”‚  ISO   â”‚  â”‚  PCMSO â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚     Ativo      ATIVO       Ativo       Inativo         â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ”§    â”‚  â”‚  ğŸ“‹    â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚Manuten.â”‚  â”‚Auditor.â”‚                               â”‚ â”‚
â”‚  â”‚  â”‚  TPM   â”‚  â”‚  ISO   â”‚                               â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚ â”‚
â”‚  â”‚   Inativo     Inativo                                  â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  ğŸ’¡ Quer ativar mais mÃ³dulos? [Planos e PreÃ§os]       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  âœ… DomÃ­nio Atual: SEGURANÃ‡A DO TRABALHO                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                            â”‚
â”‚  ğŸ“‘ MÃ³dulos DisponÃ­veis:                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âœ“ NR-35 - Trabalho em Altura         ğŸ“Š 15 checklistsâ”‚â”‚
â”‚  â”‚ âœ“ NR-10 - Eletricidade               ğŸ“Š 8 checklists â”‚â”‚
â”‚  â”‚ âœ“ NR-33 - EspaÃ§o Confinado           ğŸ“Š 12 checklistsâ”‚â”‚
â”‚  â”‚ âœ“ NR-18 - ConstruÃ§Ã£o Civil           ğŸ“Š 20 checklistsâ”‚â”‚
â”‚  â”‚ âœ“ NR-06 - EPIs                       ğŸ“Š 5 checklists â”‚â”‚
â”‚  â”‚                                                        â”‚â”‚
â”‚  â”‚ ğŸ¨ MÃ³dulos Customizados:                              â”‚â”‚
â”‚  â”‚ âœ“ DDS - DiÃ¡logo DiÃ¡rio de SeguranÃ§a  ğŸ“Š 30 registros â”‚â”‚
â”‚  â”‚ âœ“ InspeÃ§Ã£o de Andaimes               ğŸ“Š 18 registros â”‚â”‚
â”‚  â”‚                                                        â”‚â”‚
â”‚  â”‚                                    [â• Criar MÃ³dulo]  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                            â”‚
â”‚  ğŸ¯ AÃ§Ãµes RÃ¡pidas:                                        â”‚
â”‚  [ğŸ“ Novo Checklist] [ğŸ“Š RelatÃ³rios] [âš™ï¸ ConfiguraÃ§Ãµes]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ComparaÃ§Ã£o de Complexidade: Mono vs Multi

### Adicionar Nova Funcionalidade: "InspeÃ§Ã£o de VeÃ­culos"

#### ARQUITETURA ATUAL (Mono-DomÃ­nio)

```bash
Passos NecessÃ¡rios:
1. âŒ Criar nova tabela: lv_veiculos
2. âŒ Criar nova tabela: lv_veiculos_avaliacoes
3. âŒ Criar nova tabela: lv_veiculos_fotos
4. âŒ Criar novo componente: LVVeiculosContainer.tsx
5. âŒ Criar novo componente: LVVeiculosForm.tsx
6. âŒ Criar novo componente: LVVeiculosList.tsx
7. âŒ Criar nova API: lvVeiculosAPI.ts
8. âŒ Criar nova rota backend: /api/lvs/veiculos
9. âŒ Adicionar rota no DashboardNavigation (hard-coded)
10. âŒ Adicionar case no DashboardMainContent (hard-coded)
11. âŒ Migrar dados se necessÃ¡rio

TOTAL: ~40 horas de desenvolvimento
LINHAS DE CÃ“DIGO: ~2000 linhas
```

#### ARQUITETURA PROPOSTA (Multi-DomÃ­nio)

```bash
Passos NecessÃ¡rios:
1. âœ… INSERT em modulos_sistema (1 linha SQL)
2. âœ… INSERT em perguntas_modulos (20-30 linhas SQL)
3. âœ… (Opcional) Customizar Ã­cone/cor no admin

TOTAL: ~2 horas (configuraÃ§Ã£o)
LINHAS DE CÃ“DIGO: ~50 linhas SQL
COMPONENTES NOVOS: 0 (reutiliza tudo)

ğŸš€ ReduÃ§Ã£o: 95% de esforÃ§o
```

---

## 9. Casos de Uso Reais

### Caso 1: Construtora XYZ

**Perfil**: ConstruÃ§Ã£o civil, 500 funcionÃ¡rios

**DomÃ­nios Ativos**:

- SeguranÃ§a do Trabalho (NR-35, NR-18, NR-33)
- Qualidade (5S, ISO 9001)

**MÃ³dulos Customizados**:

- InspeÃ§Ã£o DiÃ¡ria de Andaimes
- Checklist de Betoneiras
- Controle de DDS (DiÃ¡logo DiÃ¡rio)

**Fluxo**:

1. Encarregado abre app no canteiro
2. Seleciona "SeguranÃ§a do Trabalho"
3. Escolhe "InspeÃ§Ã£o Andaimes"
4. Preenche 15 itens + fotos
5. Sistema detecta 2 NCs
6. Cria aÃ§Ãµes corretivas automaticamente
7. Notifica engenheiro responsÃ¡vel

**ROI**: ReduÃ§Ã£o de 70% no tempo de inspeÃ§Ãµes

---

### Caso 2: IndÃºstria MetalÃºrgica ABC

**Perfil**: IndÃºstria de grande porte, 2000 funcionÃ¡rios

**DomÃ­nios Ativos**:

- Meio Ambiente (ResÃ­duos, Efluentes, EmissÃµes)
- SeguranÃ§a do Trabalho (NR-10, NR-12, NR-13)
- ManutenÃ§Ã£o (TPM, Preventiva)
- SaÃºde (PCMSO, Exames)

**IntegraÃ§Ã£o Customizada**:

- API com SAP (ordens de manutenÃ§Ã£o)
- BI com Power BI (dashboards executivos)
- WhatsApp Business (notificaÃ§Ãµes)

**Fluxo Multi-DomÃ­nio**:

1. TÃ©cnico de meio ambiente: LV ResÃ­duos â†’ NC detectada
2. Sistema cria aÃ§Ã£o corretiva + ordem de manutenÃ§Ã£o (SAP)
3. Equipe de manutenÃ§Ã£o recebe via app (domÃ­nio ManutenÃ§Ã£o)
4. Executa reparo, registra evidÃªncias
5. SeguranÃ§a valida (domÃ­nio SeguranÃ§a - NR-12)
6. Meio ambiente valida correÃ§Ã£o (domÃ­nio Ambiental)
7. AÃ§Ã£o fechada, relatÃ³rio enviado ao dashboard executivo

**ROI**: ReduÃ§Ã£o de 50% no tempo de resposta a nÃ£o conformidades

---

## 10. MÃ©tricas de Sucesso

### KPIs para Validar Arquitetura

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ©trica                â”‚ Atual  â”‚ Meta    â”‚ Status    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tempo para novo mÃ³dulo â”‚ 40h    â”‚ 2h      â”‚ ğŸ¯ 95%â†“   â”‚
â”‚ Linhas de cÃ³digo       â”‚ 2000   â”‚ 50      â”‚ ğŸ¯ 97%â†“   â”‚
â”‚ DomÃ­nios suportados    â”‚ 1      â”‚ 6+      â”‚ ğŸ¯ 600%â†‘  â”‚
â”‚ ReutilizaÃ§Ã£o cÃ³digo    â”‚ 20%    â”‚ 90%     â”‚ ğŸ¯ 450%â†‘  â”‚
â”‚ Onboarding cliente     â”‚ 1 mÃªs  â”‚ 1 dia   â”‚ ğŸ¯ 3000%â†‘ â”‚
â”‚ Custo manutenÃ§Ã£o/ano   â”‚ 100%   â”‚ 30%     â”‚ ğŸ¯ 70%â†“   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**ConclusÃ£o Visual**: A arquitetura multi-domÃ­nio transforma o EcoField de uma **soluÃ§Ã£o pontual** em uma **plataforma escalÃ¡vel**, reduzindo drasticamente o custo de adicionar novas funcionalidades e aumentando o potencial de mercado em 6-10x.
